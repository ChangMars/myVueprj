(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5e9e484"],{"0cb2":function(t,e,o){var c=o("7b0b"),a=Math.floor,n="".replace,r=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,o,i,d,s){var u=o+t.length,b=i.length,h=l;return void 0!==d&&(d=c(d),h=r),n.call(s,h,(function(c,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(u);case"<":r=d[n.slice(1,-1)];break;default:var l=+n;if(0===l)return c;if(l>b){var s=a(l/10);return 0===s?c:s<=b?void 0===i[s-1]?n.charAt(1):i[s-1]+n.charAt(1):c}r=i[l-1]}return void 0===r?"":r}))}},1148:function(t,e,o){"use strict";var c=o("5926"),a=o("577e"),n=o("1d80");t.exports=function(t){var e=a(n(this)),o="",r=c(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(o+=e);return o}},"408a5":function(t,e){var o=1..valueOf;t.exports=function(t){return o.call(t)}},5319:function(t,e,o){"use strict";var c=o("d784"),a=o("d039"),n=o("825a"),r=o("1626"),l=o("5926"),i=o("50c4"),d=o("577e"),s=o("1d80"),u=o("8aa5"),b=o("dc4a"),h=o("0cb2"),p=o("14c3"),m=o("b622"),f=m("replace"),j=Math.max,O=Math.min,v=function(t){return void 0===t?t:String(t)},g=function(){return"$0"==="a".replace(/./,"$0")}(),y=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),P=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));c("replace",(function(t,e,o){var c=y?"$":"$0";return[function(t,o){var c=s(this),a=void 0==t?void 0:b(t,f);return a?a.call(t,c,o):e.call(d(c),t,o)},function(t,a){var s=n(this),b=d(t);if("string"===typeof a&&-1===a.indexOf(c)&&-1===a.indexOf("$<")){var m=o(e,s,b,a);if(m.done)return m.value}var f=r(a);f||(a=d(a));var g=s.global;if(g){var y=s.unicode;s.lastIndex=0}var P=[];while(1){var x=p(s,b);if(null===x)break;if(P.push(x),!g)break;var w=d(x[0]);""===w&&(s.lastIndex=u(b,i(s.lastIndex),y))}for(var M="",$=0,k=0;k<P.length;k++){x=P[k];for(var U=d(x[0]),L=j(O(l(x.index),b.length),0),F=[],I=1;I<x.length;I++)F.push(v(x[I]));var C=x.groups;if(f){var S=[U].concat(F,L,b);void 0!==C&&S.push(C);var _=d(a.apply(void 0,S))}else _=h(U,b,L,F,C,a);L>=$&&(M+=b.slice($,L)+_,$=L+U.length)}return M+b.slice($)}]}),!P||!g||y)},"99af":function(t,e,o){"use strict";var c=o("23e7"),a=o("d039"),n=o("e8b5"),r=o("861d"),l=o("7b0b"),i=o("07fa"),d=o("8418"),s=o("65f0"),u=o("1dde"),b=o("b622"),h=o("2d00"),p=b("isConcatSpreadable"),m=9007199254740991,f="Maximum allowed index exceeded",j=h>=51||!a((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),O=u("concat"),v=function(t){if(!r(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},g=!j||!O;c({target:"Array",proto:!0,forced:g},{concat:function(t){var e,o,c,a,n,r=l(this),u=s(r,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(n=-1===e?r:arguments[e],v(n)){if(a=i(n),b+a>m)throw TypeError(f);for(o=0;o<a;o++,b++)o in n&&d(u,b,n[o])}else{if(b>=m)throw TypeError(f);d(u,b++,n)}return u.length=b,u}})},a15b:function(t,e,o){"use strict";var c=o("23e7"),a=o("44ad"),n=o("fc6a"),r=o("a640"),l=[].join,i=a!=Object,d=r("join",",");c({target:"Array",proto:!0,forced:i||!d},{join:function(t){return l.call(n(this),void 0===t?",":t)}})},b680:function(t,e,o){"use strict";var c=o("23e7"),a=o("5926"),n=o("408a5"),r=o("1148"),l=o("d039"),i=1..toFixed,d=Math.floor,s=function(t,e,o){return 0===e?o:e%2===1?s(t,e-1,o*t):s(t*t,e/2,o)},u=function(t){var e=0,o=t;while(o>=4096)e+=12,o/=4096;while(o>=2)e+=1,o/=2;return e},b=function(t,e,o){var c=-1,a=o;while(++c<6)a+=e*t[c],t[c]=a%1e7,a=d(a/1e7)},h=function(t,e){var o=6,c=0;while(--o>=0)c+=t[o],t[o]=d(c/e),c=c%e*1e7},p=function(t){var e=6,o="";while(--e>=0)if(""!==o||0===e||0!==t[e]){var c=String(t[e]);o=""===o?c:o+r.call("0",7-c.length)+c}return o},m=i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){i.call({})}));c({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,o,c,l,i=n(this),d=a(t),m=[0,0,0,0,0,0],f="",j="0";if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(f="-",i=-i),i>1e-21)if(e=u(i*s(2,69,1))-69,o=e<0?i*s(2,-e,1):i/s(2,e,1),o*=4503599627370496,e=52-e,e>0){b(m,0,o),c=d;while(c>=7)b(m,1e7,0),c-=7;b(m,s(10,c,1),0),c=e-1;while(c>=23)h(m,1<<23),c-=23;h(m,1<<c),b(m,1,1),h(m,2),j=p(m)}else b(m,0,o),b(m,1<<-e,0),j=p(m)+r.call("0",d);return d>0?(l=j.length,j=f+(l<=d?"0."+r.call("0",d-l)+j:j.slice(0,l-d)+"."+j.slice(l-d))):j=f+j,j}})},e01a:function(t,e,o){"use strict";var c=o("23e7"),a=o("83ab"),n=o("da84"),r=o("1a2d"),l=o("1626"),i=o("861d"),d=o("9bf2").f,s=o("e893"),u=n.Symbol;if(a&&l(u)&&(!("description"in u.prototype)||void 0!==u().description)){var b={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(b[e]=!0),e};s(h,u);var p=h.prototype=u.prototype;p.constructor=h;var m=p.toString,f="Symbol(test)"==String(u("test")),j=/^Symbol\((.*)\)[^)]+$/;d(p,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=m.call(t);if(r(b,t))return"";var o=f?e.slice(7,-1):e.replace(j,"$1");return""===o?void 0:o}}),c({global:!0,forced:!0},{Symbol:h})}},e6dc:function(t,e,o){"use strict";o.r(e);var c=o("7a23"),a={class:"text-end"},n={class:"table mt-4"},r=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th",{width:"120"},"分類"),Object(c["h"])("th",null,"產品名稱"),Object(c["h"])("th",{width:"120"},"原價"),Object(c["h"])("th",{width:"120"},"售價"),Object(c["h"])("th",{width:"120"},"是否啟用"),Object(c["h"])("th",{width:"120"},"編輯")])],-1),l={class:"text-right"},i={class:"text-right"},d={key:0,class:"text-success"},s={key:1,class:"text-muted"},u={class:"btn-group"},b=["onClick"],h=["onClick"];function p(t,e,o,p,m,f){var j=Object(c["I"])("Loading"),O=Object(c["I"])("ProductModal"),v=Object(c["I"])("DelModal"),g=Object(c["I"])("Pagination");return Object(c["y"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(j,{active:m.isLoading},null,8,["active"]),Object(c["h"])("div",a,[Object(c["h"])("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=function(t){return f.openModal(!0)})}," 增加一個產品 ")]),Object(c["h"])("table",n,[r,Object(c["h"])("tbody",null,[(Object(c["y"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(m.products,(function(t){return Object(c["y"])(),Object(c["g"])("tr",{key:t.id},[Object(c["h"])("td",null,Object(c["L"])(t.category),1),Object(c["h"])("td",null,Object(c["L"])(t.title),1),Object(c["h"])("td",l,Object(c["L"])(f.currency(t.origin_price)),1),Object(c["h"])("td",i,Object(c["L"])(f.currency(t.price)),1),Object(c["h"])("td",null,[t.is_enabled?(Object(c["y"])(),Object(c["g"])("span",d,"啟用")):(Object(c["y"])(),Object(c["g"])("span",s,"未啟用"))]),Object(c["h"])("td",null,[Object(c["h"])("div",u,[Object(c["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(e){return f.openModal(!1,t)}},"編輯",8,b),Object(c["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return f.openDelProductModal(t)}},"刪除",8,h)])])])})),128))])]),Object(c["k"])(O,{ref:"productModal",product:m.tempProduct,onUpdateProduct:f.updateProduct},null,8,["product","onUpdateProduct"]),Object(c["k"])(v,{ref:"delModal",item:m.tempProduct,onDelItem:f.delProduct},null,8,["item","onDelItem"]),Object(c["k"])(g,{pages:m.pagination,onEmitPages:f.getProducts},null,8,["pages","onEmitPages"])],64)}var m=o("5530"),f=(o("99af"),o("a15b"),o("a4d3"),o("e01a"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),j={class:"modal-dialog modal-xl",role:"document"},O={class:"modal-content border-0"},v=Object(c["h"])("div",{class:"modal-header bg-dark text-white"},[Object(c["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["h"])("span",null,"新增產品")]),Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},y={class:"row"},P={class:"col-sm-4"},x={class:"mb-3"},w=Object(c["h"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),M={class:"mb-3"},$=Object(c["h"])("label",{for:"customFile",class:"form-label"},[Object(c["j"])("或 上傳圖片 "),Object(c["h"])("i",{class:"fas fa-spinner fa-spin"})],-1),k=Object(c["i"])('<img class="img-fluid" alt=""><div class="mt-5"><div class="mb-3 input-group"><input type="url" class="form-control form-control" placeholder="請輸入連結"><button type="button" class="btn btn-outline-danger"> 移除 </button></div><div><button class="btn btn-outline-primary btn-sm d-block w-100"> 新增圖片 </button></div></div>',2),U={class:"col-sm-8"},L={class:"mb-3"},F=Object(c["h"])("label",{for:"title",class:"form-label"},"標題",-1),I={class:"row gx-2"},C={class:"mb-3 col-md-6"},S=Object(c["h"])("label",{for:"category",class:"form-label"},"分類",-1),_={class:"mb-3 col-md-6"},V=Object(c["h"])("label",{for:"price",class:"form-label"},"單位",-1),D={class:"row gx-2"},E={class:"mb-3 col-md-6"},A=Object(c["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),N={class:"mb-3 col-md-6"},J=Object(c["h"])("label",{for:"price",class:"form-label"},"售價",-1),R=Object(c["h"])("hr",null,null,-1),T={class:"mb-3"},G=Object(c["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),W={class:"mb-3"},q=Object(c["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),z={class:"mb-3"},B={class:"form-check"},H=Object(c["h"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),K={class:"modal-footer"},Q=Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function X(t,e,o,a,n,r){return Object(c["y"])(),Object(c["g"])("div",f,[Object(c["h"])("div",j,[Object(c["h"])("div",O,[v,Object(c["h"])("div",g,[Object(c["h"])("div",y,[Object(c["h"])("div",P,[Object(c["h"])("div",x,[w,Object(c["U"])(Object(c["h"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[0]||(e[0]=function(t){return n.tempProduct.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[c["P"],n.tempProduct.imageUrl]])]),Object(c["h"])("div",M,[$,Object(c["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=function(){return r.uploadFile&&r.uploadFile.apply(r,arguments)})},null,544)]),k]),Object(c["h"])("div",U,[Object(c["h"])("div",L,[F,Object(c["U"])(Object(c["h"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[2]||(e[2]=function(t){return n.tempProduct.title=t})},null,512),[[c["P"],n.tempProduct.title]])]),Object(c["h"])("div",I,[Object(c["h"])("div",C,[S,Object(c["U"])(Object(c["h"])("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":e[3]||(e[3]=function(t){return n.tempProduct.category=t})},null,512),[[c["P"],n.tempProduct.category]])]),Object(c["h"])("div",_,[V,Object(c["U"])(Object(c["h"])("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":e[4]||(e[4]=function(t){return n.tempProduct.unit=t})},null,512),[[c["P"],n.tempProduct.unit]])])]),Object(c["h"])("div",D,[Object(c["h"])("div",E,[A,Object(c["U"])(Object(c["h"])("input",{type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.origin_price=t})},null,512),[[c["P"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(c["h"])("div",N,[J,Object(c["U"])(Object(c["h"])("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.price=t})},null,512),[[c["P"],n.tempProduct.price,void 0,{number:!0}]])])]),R,Object(c["h"])("div",T,[G,Object(c["U"])(Object(c["h"])("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.description=t})},null,512),[[c["P"],n.tempProduct.description]])]),Object(c["h"])("div",W,[q,Object(c["U"])(Object(c["h"])("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.content=t})},null,512),[[c["P"],n.tempProduct.content]])]),Object(c["h"])("div",z,[Object(c["h"])("div",B,[Object(c["U"])(Object(c["h"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[c["O"],n.tempProduct.is_enabled]]),H])])])])]),Object(c["h"])("div",K,[Q,Object(c["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[10]||(e[10]=function(e){return t.$emit("update-product",n.tempProduct)})}," 確認 ")])])])],512)}var Y=o("7c2b"),Z=o.n(Y),tt={props:{product:{type:Object,default:function(){return{}}}},watch:{product:function(){console.log("watch"),console.log(this.tempProduct),this.tempProduct=this.product}},data:function(){return{modal:{},tempProduct:{}}},methods:{showModal:function(){console.log("showModal"),this.modal.show()},hideModal:function(){console.log("hideModal"),this.modal.hide()},uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0];console.dir(e);var o=new FormData;o.append("file-to-upload",e);var c="".concat("http://localhost:3000/","api/").concat("mars-api","/admin/upload");this.$http.post(c,o).then((function(e){console.log(e.data),e.data.success&&(t.tempProduct.imageUrl=e.data.imageUrl)}))}},mounted:function(){this.modal=new Z.a(this.$refs.modal)}},et=o("6b0d"),ot=o.n(et);const ct=ot()(tt,[["render",X]]);var at=ct,nt={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},rt={class:"modal-dialog",role:"document"},lt={class:"modal-content border-0"},it={class:"modal-header bg-danger text-white"},dt={class:"modal-title"},st=Object(c["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ut={class:"modal-body"},bt=Object(c["j"])(" 是否刪除 "),ht={class:"text-danger"},pt=Object(c["j"])(" (刪除後將無法恢復)。 "),mt={class:"modal-footer"},ft=Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function jt(t,e,o,a,n,r){return Object(c["y"])(),Object(c["g"])("div",nt,[Object(c["h"])("div",rt,[Object(c["h"])("div",lt,[Object(c["h"])("div",it,[Object(c["h"])("h5",dt,[Object(c["h"])("span",null,"刪除 "+Object(c["L"])(o.item.title),1)]),st]),Object(c["h"])("div",ut,[bt,Object(c["h"])("strong",ht,Object(c["L"])(o.item.title),1),pt]),Object(c["h"])("div",mt,[ft,Object(c["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=function(e){return t.$emit("del-item")})},"確認刪除 ")])])])],512)}var Ot={methods:{showModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new Z.a(this.$refs.modal)}},vt={props:{item:{}},data:function(){return{modal:""}},mixins:[Ot]};const gt=ot()(vt,[["render",jt]]);var yt=gt,Pt=o("1799");o("ac1f"),o("5319"),o("b680");function xt(t){var e=parseInt(t,10);return"".concat(e.toFixed(0).replace(/./g,(function(t,e,o){return e&&"."!==t&&(o.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t})))}var wt={components:{ProductModal:at,DelModal:yt,Pagination:Pt["a"]},inject:["emitter"],data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},methods:{currency:xt,getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("http://localhost:3000/","api/").concat("mars-api","/products/?page=").concat(e);this.isLoading=!0,console.log(o),this.$http.get(o).then((function(e){t.isLoading=!1,e.data.success&&(console.log(e),t.products=e.data.products,t.pagination=e.data.pagination)}))},openModal:function(t,e){console.log(t,e),this.tempProduct=t?{}:Object(m["a"])({},e);var o=this.$refs.productModal;o.showModal()},openDelProductModal:function(t){this.tempProduct=Object(m["a"])({},t);var e=this.$refs.delModal;e.showModal()},updateProduct:function(t){var e=this;this.tempProduct=t;var o="".concat("http://localhost:3000/","api/").concat("mars-api","/admin/product"),c=this.$refs.productModal;this.$http.post(o,{data:this.tempProduct}).then((function(t){console.log(t),c.hideModal(),t.data.success?(e.getProducts(),e.emitter.emit("push-message",{style:"success",title:"更新成功"})):e.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})}))},delProduct:function(){var t=this,e="".concat("http://localhost:3000/","api/").concat("mars-api","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){console.log(e.data);var o=t.$refs.delModal;o.hideModal(),t.getProducts()}))}},created:function(){this.getProducts()}};const Mt=ot()(wt,[["render",p]]);e["default"]=Mt}}]);
//# sourceMappingURL=chunk-d5e9e484.f03eeb7d.js.map